<html>
<head>
  <title>리눅스 아나콘다 설치 가이드</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307934 (ko-KR, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="439"/>
<h1>리눅스 아나콘다 설치 가이드</h1>

<div>
<span><div><div style="margin-left: 200px;"><span style="font-size: 24pt; font-weight: bold;">리눅스에 아나콘다 or 하둡 설치</span></div><div style="margin-left: 560px;"><font style="font-size: 24pt;"><br/></font></div><div><br/></div><div style="margin-left: 120px;"><span style="font-weight: bold;">준비항목: 가상머신(virtual Box), 운영체제(centOS), 분석서버(Anaconda), 터미널 연결 툴(putty), 파일전송 툴(FileZilla)</span></div><div><br/></div><div><br/></div><div>리눅스에 아나콘다 or 하둡 설치 </div><div><br/></div><div>준비항목: 가상머신(virtual Box), 운영체제(centOS), 분석서버(Anaconda), 터미널 연결 툴(putty), 파일전송 툴(FileZilla)</div><div><br/></div><div><b>1-1. Linux 설치 (virtual Box)</b></div><div>1) 가상머신 이름 설정</div><div>2) 메모리 크기 2G정도 (2048)</div><div>3) 하드 설정</div><div>4) 파일 위치 및 크기 32G정도</div><div><br/></div><div><b>1-2. 네트워크 설정</b></div><div>1) 어탭터1 - 어탭터에 브리지 -&gt; 이름: 공유기로 설정 -&gt; 무작위 모드: 모두 허용</div><div>2) 어탭터2 - 호스트 전용 어탭터 -&gt; 이름: 호스트 전용 어탭터 -&gt; 무작위 모드: 모두 허용</div><div><br/></div><div><b>1-3. 저장소 설정</b></div><div>1) 설정 -&gt; 저장소 -&gt; 컨트롤러 : IDE 디스크에 광학 드라이브를 CentOS로 설정</div><div><br/></div><div><br/></div><div><b>1-4. 가상머신 실행</b></div><div>1) 소프트웨어 선택 -&gt; 기본환경: 서버-GUI사용 체크</div><div>2) 설치대상 -&gt; 체크</div><div><br/></div><div><br/></div><div><b>1-5. ROOT설정</b></div><div>1) root암호 설정</div><div>2) 사용자 생성</div><div><br/></div><div><b>2-1. 계정 생성 (서버에 리눅스OS 설치 이후)</b></div><div>1) su - root (root로 접속 해야 계정 생성 가능</div><div>2) adduser '아이디'</div><div>3) passwd '아이디'</div><div>4 )비밀번호 설정</div><div><br/></div><div><b>2-2. 계정 생성한 곳에 sudo권한 부여</b></div><div>1) su - root</div><div>2) visudo (권한 부여 하는 명령어 툴)</div><div>3) Allow root to run any commands anywhere 밑에</div><div>    root    ALL=(ALL)    ALL  밑에</div><div>    conda  ALL=(ALL)    ALL 입력  (권한을 부여할 아이디를 입력 후 ALL로 수행 가능한 명령어)</div><div>   *(모든 명령어 Passwd 스킵하려면 NOPASSWD:ALL 해줘야 함 / 일부 명령어는 NOPASSWD:root/test.sh)</div><div>   *(vi편집기에서 검색 기능은 '/' 후 검색할 키워드 ex. /Allow)</div><div><br/></div><div><b>3-1. 서버 내 고정 IP 할당</b></div><div>1) 해당 가상 머신 설정 -&gt; 네트워크 -&gt; 어탭터에 브리지의 MAC주소 확인</div><div>2) nmcli (1번에서 확인한 MAC주소를 찾는다 or 연결되지 않은 네트워크를 찾음)</div><div>3) vi /etc/sysconfig/network-scripts/ifcfg-enp0s3 명령어를 친다. (enp0s3은 1번의 MAC주소와 동일한 서버)</div><div>4) BOOTPROTO = &quot;static&quot; 으로 변경 / ONBOOT = &quot;yes&quot; 로 변경 / IPADDR = 192.168. 110.113 / NETMAST = 255.255.255.0 / GATEWAY = 192.168.110.254</div><div>   *(ip주소,서브넷,게이트웨이 정보는 cmd에서 ipconfig로 확인)</div><div><br/></div><div>////</div><div><b>3-2. 외부인터넷 연결을 위한 네임서버 등록</b></div><div>1) vi /etc/resolv.conf</div><div>2) nameserver 8.8.8.8 입력</div><div>3) 설정 완료를 반영하기 위해 systemctl restart network 입력 (네트워크 재시작)</div><div>4) ping <a href="http://www.google.com/">www.google.com</a> 핑 확인</div><div>////</div><div><br/></div><div><b>4-1. 서버 본체의 Host Name을 설정</b></div><div>1) vi /etc/sysconfig/network</div><div>2) NETWORKING=yes</div><div>    HOSTNAME=conda (p-master)입력</div><div><br/></div><div><br/></div><div><b>5-1. 서버에 연결될 서버들을 인식하기 위해 hosts를 설정</b>.</div><div>1) vi /etc/hosts</div><div>2) 192.168.0.113 p-master master</div><div>    192.168.0.114  hadoop1 hadoop1</div><div>    192.168.0.115  hadoop1 hadoop2</div><div>    192.168.0.116  hadoop3 hadoop3   입력</div><div><br/></div><div><br/></div><div><b>6-1. Selinux 해제</b></div><div>1) sestatus로 selinux의 상태를 확인 (ex. enabled)</div><div>2) vi /etc/selinux/config</div><div>   </div><div><br/></div><div><b>7-1. 방화벽 해제</b></div><div>1) firewall-cmd --pernanent --zone=public --add-port=50070/tcp     -&gt;     (포트 추가)</div><div>2) firewall-cmd --reload            -&gt;         (방화벽 재시작)</div><div>3) firewall-cmd --list-all          -&gt;     (사용 가능한 모든 서비스/포트 목록 조회)</div><div>4) firewall-cmd --list-ports       -&gt;     (허용한 포트 목록)</div><div>5) firewall-cmd -state         -&gt;     (방화벽 상태 확인)</div><div>6) systemctl stop firewalld       -&gt;     (방화벽 기능 정지)</div><div>7) systemctl disable firewalld     -&gt;    (방화벽 기능 해제)</div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image.png" type="image/png" data-filename="Image.png" width="662"/></div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [1].png" type="image/png" data-filename="Image.png" width="658"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><b>8-1. 복제 설정</b></div><div>1) 마스터의 가상머신을 복제</div><div>2) 이름과 경로를 확인한 후 MAC주소 정책에 '모든 네트워크 어탭터의 새 MAC 주소 생성' 을 선택</div><div><br/></div><div><b>8-2. 복제 설정</b></div><div>1) hostnamectl set-hostname hadoop1 .... hadoop3까지 (복제된 각각의 머신의 hostname을 바꿔준다)</div><div>2) vi /etc/sysconfig/network-scripts/ifcfg-enp0s8    - &gt;   IPADDR = 192.168.0.114 (복제된 각각의 머신에서 IP주소를 변경해준다)</div><div><br/></div><div><br/></div><div><b>9-1. keygen설정</b> (마스터에서만! 마스터 = 복제된 가상머신에서가 아닌 오직 마스터 가상머신에서만 root x / p-master o)</div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [2].png" type="image/png" data-filename="Image.png" width="661"/></div><div>* id_rsa: 개인키 타인에게 노출되면 안됨</div><div>* id_rsa.pub: 공개키, 접속하려는 원격 머신의 authorized_keys에 복사</div><div>* authorized_keys: 원격머신의 .ssh 디렉토리 아래에 위치하면서 공개키의 값을 저장하고 있음</div><div><br/></div><div>1) ssh-keygen (RSA키 페어를 생성)</div><div>2) cat ~/.ssh/id_rsa.pub&gt;&gt;~/.ssh/autorized_keys</div><div>3) chmod 700 ~/.ssh</div><div>4) chmod 600 ~/.ssh/authorized_keys</div><div>5) ssh-copy-id -i ~/.ssh/id_rsa.pub p-master@hadoop1  ~~@hadoop3 (복제된 가상머신 각각의 호스트네임에 배포)</div><div>   * 연결을 계속 할것인지 물어보면 yes -&gt; then 각 서버의 비밀번호 입력</div><div><br/></div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">공개키 배포하는 과정에서 hadoop2에서 오류 발생.</span></div><div><br/></div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="color: rgb(227, 0, 0); font-weight: bold;">rm -rfd ~/.ssh 키 삭제   </span> <span style="color: rgb(255, 0, 0); font-weight: bold;"> </span></div><div><br/></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">또는</span></div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [5].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="color: rgb(227, 0, 0); font-weight: bold;">ssh-keygen -R hadoop2  명령어 사용 (이 경우에 성공함)</span></div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [6].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="color: rgb(227, 0, 0); font-weight: bold;">hadoop2의 키 확인</span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><b>9-2. 원격 명령 실행</b></div><div>1) ssh p-master@hadoop1 ls/home/</div><div><br/></div><div><span style="font-weight: bold; color: rgb(255, 0, 0);">********오류***********</span></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [7].png" type="image/png" data-filename="Image.png" width="734"/></div><div><br/></div><div><span style="color: rgb(255, 70, 53); font-weight: bold;">원격 명령 실행을 하기 위해 명령어를 입력하니 포트를 잡을 수 없다고 에러 뜸.</span></div><div><br/></div><div>tryed -</div><ol><li><div>방화벽이 차단 상태 확인 ( <span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(70, 70, 70); font-family: 돋움, dotum, verdana, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">systemctl status  firewalld )</span></div></li><li><div>혹시 몰라 방화벽 다시 해제</div></li></ol><div>solution -</div><ol><li><div>master계정과 hadoop1~3 의 ip주소가 달랐음. (master 계정ip: 192.168.110.113 / hadoop1계정ip: 192.168.0.114) </div></li><li><div>***** 네트워크 꼭 공유기로 잡아줘라 ********</div></li></ol><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><img src="리눅스 아나콘다 설치 가이드_files/Image [8].png" type="image/png" data-filename="Image.png"/></div></div><div><br/></div></span>
</div></body></html> 